# OpenSpan RDA monitoring through `filebeat`

## How OpenSpan RDA works

In this example, we would like to ship the log files generated by OpenSpan RDA into elastic. As RDA is a desktop tool that can run standalone without server based component or back-end, it becomes paramount to deploy a very light agent in each desktop whose sole role will be to ship the log to elasticsearch. Any transformation of data will be done centrally in `logstash`. In other words we can hve as many `filebeat` installed as we have desktop running OpenSpan RDA. The picture below describe the architecture in place :

<a align="center">
 <figure align="center">
<img src="./Images/relationship-between-filebeat-and-logstash.png" width=75%/>
<figcaption>Chart taken <a href="https://logz.io/blog/filebeat-vs-logstash/">here</a></figcaption>
 </figure>
 </a>

&nbsp;
&nbsp;
> Note we will not discuss here whether we need to use kafka or not, there is a post explaining 

To make this solution working, here are the different elements of `filebeat-logstash-elastic-kibana` being used :

- `logstash` plugins : elapsed, date, csv
- `logstash` grok matching rules and regular expression.

## log files

In this example we have implemented both format : *RuntimeLog.txt* and *Runtime_Log4Net.txt*, you can find more information [here](./OpenSpan-logs.md)

## `filebeat` multiline

https://www.elastic.co/guide/en/beats/filebeat/current/multiline-examples.html

## `fileBeat` elastic monitoring


## Other consideration : using Kafka

> Note we will not discuss here whether we need to use kafka or not, there is a great post  [here](https://www.elastic.co/blog/just-enough-kafka-for-the-elastic-stack-part1) that explain the value and when to use kafka. But keep in minf the anti-pattern : **If you can tolerate a relaxed search latency, you can completely skip the use of Kafka. Filebeat, which follows and ships file content from edge nodes, is resilient to log rotations.**